# 네트워크



### HTTP 메소드

- **POST** : 서버나 특정 리소스에 엔티티를 제출할 때 사용한다. Create, Update, Delete 등을 할 때 사용하기도 한다. (Create)
- **GET** : 특정 리소스의 참조를 요청한다. (Read)
- **PUT** : 해당 리소스를 수정할 때 사용한다. 전체 리소스를 업데이트 하는데 사용한다.(Update)
- **DELETE** : 삭제할 때 사용한다. (Delete)
- **PATCH** : 리소스의 부분적으로 수정할 때 사용한다.



### HTTP 1.1 vs HTTP 2.0

**HTTP(HyperText Transfer Protocol)**

: WWW에서 하이퍼텍스트 문서를 교환하기 위해 사용되는 통신규약

**HTTP/1.1**

연결당 하나의 요청을 처리하도록 설계되어 있어서 동시 전송이 불가능하며, 요청과 응답이 순차적으로 이루어진다. 그로인해 HTTP 문서안에 포함된 다수의 리소스를 처리하려면 개수에 비례해서 대기시간이 길어진다.

- 단점
  - HOL(Head Of Line) Blocking : 특정 읍답의 지연
  - RTT(Round Trip Time) 증가
  - 무거운 헤더 구조(특히 Cookie)



**HTTP/2.0**

- 장점
  - Multiplexed Streams
    - 한 커넥션으로 동시에 여러 개의 메시지를 주고 받을 수 있으며, 응답은 순서에 상관없이 stream으로 주고 받는다.
  - Stream Prioritization
    - 리소스간 우선순위를 설정하여 렌더링이 늦어지는 문제 해결
  - Server Push
    - 서버는 클라이언트의 요청에 대해 요청하지도 않은 리소스를 보낼 수 있다.
    - 클라이언트의 요청을 최소화해서 성능 향상을 이끌어 낸다.
    - PUSH_PROMISE라고 부르며 PUSH_PROMISE를 통해서 서버가 전송한 리소스에 대해선 클라이언트는 요청을 하지 않는다.



### HTTP request and response

1. 웹페이지 요청을 위해 Get request를 서버에 보낸다. 이때 쿠키에 해당 웹페이지에 대한 정보가 담겨있다면 헤더에 포함되어 함께 보내진다.
2. 서버에 WAS(Web Application Server)가 있다면 백엔드 엔지니어가 설계한대로 request에 대한 핸들링을 해준다. 그리고 response를 JSON, XML 등 포맷에 맞춰 만들어준다.
3. 서버는 status code와 함께 response를 보낸다.



###  HTTP 프로토콜 특징

- 비연결 지향(connectionless) : 클라이언트가 request를 서버에 보내고, 서버가 클라이언트 요청에 맞는 response를 보내면 바로 연결을 끊는다.
- 상태정보 유지 안함(stateless) : 연결을 끊는 순간 클라이언트와 서버의 통신은 끝나며 상태 정보를 유지하지 않는다.



### HTTP와 HTTPS(HTTP + Secure Socket)차이

기본 골격이나 사용목적 등은 거의 동일하지만, 데이터를 주고 받는 과정에 '보안'요소가 추가된다는 것이 가장 큰 차이점이다. HTTPS를 사용하면 서버와 클라이언트 사이의 모든 통신 내용이 암호화 된다. HTTPS는 웹 서버에 접속하는 사용자마다 다른 암호를 제공해야 하기 때문에 쉽지 않다.

#### HTTPS 특징

보안 요소가 추가된만큼 처리속도는 느릴 수 밖에 없고 관련 웹서버의 사양도 중요하다. 가벼운 웹서핑이라면 HTTP를 사용해도 되지만 자료를 주고 받는 경우에는 개인정보 유출로 이어질 수 있다. 



### URL에 www.example.com을 쳤을 때 일어나는 일

URL(Uniform Resource Locator)은 ip주소를 대신해서 사람에게 기억하기 쉬운 문자로 만들어졌다. 도메인 이름과 ip주소를 domain name server에서 DB로 관리한다. 이러한 시스템을 Domain Name System이라고 한다. URL에 담긴 문법구조를 브라우저가 파악해서 올바른 문법구조로 되어있는지 확인한다.

#### 올바른 문법구조라면

1. 브라우저에는 최근 방문한 페이지의 DNS 기록을 일정시간 저장해놓는 캐시가 있다. DNS를 활용하기 위해 먼저 캐시를 확인한다.
2. 만약 없다면, OS에 있는 캐시를 확인한다.
3. OS에도 없다면 라우터에 있는 캐시에 확인한다.
4. 라우터에도 없다면 URL을 입력할 때 이에대한 요청은 일반적으로 Internet Service Provider라고 하는 인터넷 공급업체나 기업 네트워크 DNS 해석기로 라우팅 된다. 해당 ISP 캐시가 기록을 가지고 있는지 마지막으로 확인한다.
5. ISP는 DNS서버를 가지고 있는데 해당 URL과 맵핑되는 ip주소가 있는지 확인하고 없으면 에러, 있으면 해당 ip주소를 DNS서버로부터 가져온다.



#### TCP Connection

리소스를 요청할 서버가 어딨는지 알게 되었으니 브라우저는 서버와 TCP connection을 맺고 요청한 데이터를 받을 다리를 건설한다. 이것을 3-way-handshaking이라고 한다. 

UDP의 경우 이 과정이 없으나 http 프로토콜의 경우 TCP connection이 default이므로 데이터 이동 전에는 이 과정이 항상 선행된다고 볼 수 있다.



